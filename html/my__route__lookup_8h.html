<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Route Lookup: Referencia del Archivo student_source/my_route_lookup.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Route Lookup
   &#160;<span id="projectnumber">100384036</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Buscar');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Buscar');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('my__route__lookup_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Estructuras de datos</a> &#124;
<a href="#typedef-members">typedefs</a> &#124;
<a href="#func-members">Funciones</a>  </div>
  <div class="headertitle">
<div class="title">Referencia del Archivo my_route_lookup.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Dependencia gráfica adjunta para my_route_lookup.h:</div>
<div class="dyncontent">
<div class="center"><img src="my__route__lookup_8h__incl.png" border="0" usemap="#student__source_2my__route__lookup_8h" alt=""/></div>
<map name="student__source_2my__route__lookup_8h" id="student__source_2my__route__lookup_8h">
<area shape="rect" title=" " alt="" coords="41,5,211,47"/>
<area shape="rect" title=" " alt="" coords="5,95,71,121"/>
<area shape="rect" title=" " alt="" coords="95,95,157,121"/>
<area shape="rect" title=" " alt="" coords="181,95,244,121"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
Gráfico de los archivos que directa o indirectamente incluyen a este archivo:</div>
<div class="dyncontent">
<div class="center"><img src="my__route__lookup_8h__dep__incl.png" border="0" usemap="#student__source_2my__route__lookup_8hdep" alt=""/></div>
<map name="student__source_2my__route__lookup_8hdep" id="student__source_2my__route__lookup_8hdep">
<area shape="rect" title=" " alt="" coords="5,5,175,47"/>
<area shape="rect" href="my__route__lookup_8c.html" title=" " alt="" coords="5,95,175,136"/>
</map>
</div>
</div>
<p><a href="my__route__lookup_8h_source.html">Ir al código fuente de este archivo.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Estructuras de datos</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_kit_tablas.html">KitTablas</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estructura que almacena las 2 tablas principales, así como 2 indices.  <a href="struct_kit_tablas.html#details">Más...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
typedefs</h2></td></tr>
<tr class="memitem:ab0481ad02246a7ccc6a7249eabc7fac8"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_kit_tablas.html">KitTablas</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="my__route__lookup_8h.html#ab0481ad02246a7ccc6a7249eabc7fac8">Tablas</a></td></tr>
<tr class="memdesc:ab0481ad02246a7ccc6a7249eabc7fac8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estructura que almacena las 2 tablas principales, así como 2 indices.  <a href="my__route__lookup_8h.html#ab0481ad02246a7ccc6a7249eabc7fac8">Más...</a><br /></td></tr>
<tr class="separator:ab0481ad02246a7ccc6a7249eabc7fac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Funciones</h2></td></tr>
<tr class="memitem:af06d8c52ae4f34c8d204afa884cd80b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="my__route__lookup_8h.html#af06d8c52ae4f34c8d204afa884cd80b8">VarInit</a> ()</td></tr>
<tr class="memdesc:af06d8c52ae4f34c8d204afa884cd80b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inicializa las variables globales.  <a href="my__route__lookup_8h.html#af06d8c52ae4f34c8d204afa884cd80b8">Más...</a><br /></td></tr>
<tr class="separator:af06d8c52ae4f34c8d204afa884cd80b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0d915b11e7a3802d9a60edb7c218d62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="my__route__lookup_8h.html#ab0d915b11e7a3802d9a60edb7c218d62">TablasInit</a> (<a class="el" href="my__route__lookup_8h.html#ab0481ad02246a7ccc6a7249eabc7fac8">Tablas</a> *tabla)</td></tr>
<tr class="memdesc:ab0d915b11e7a3802d9a60edb7c218d62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inicializa las tablas.  <a href="my__route__lookup_8h.html#ab0d915b11e7a3802d9a60edb7c218d62">Más...</a><br /></td></tr>
<tr class="separator:ab0d915b11e7a3802d9a60edb7c218d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad96bd166f3f6d7ce5de7a2a8f505c43f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="my__route__lookup_8h.html#ad96bd166f3f6d7ce5de7a2a8f505c43f">DeleteAllTables</a> (<a class="el" href="my__route__lookup_8h.html#ab0481ad02246a7ccc6a7249eabc7fac8">Tablas</a> *tablas)</td></tr>
<tr class="memdesc:ad96bd166f3f6d7ce5de7a2a8f505c43f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Elimina y libera las tablas.  <a href="my__route__lookup_8h.html#ad96bd166f3f6d7ce5de7a2a8f505c43f">Más...</a><br /></td></tr>
<tr class="separator:ad96bd166f3f6d7ce5de7a2a8f505c43f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae78aeb8a794e89cc7fc9d40e7a7d2ec4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="my__route__lookup_8h.html#ae78aeb8a794e89cc7fc9d40e7a7d2ec4">Search</a> (int *accesoextra, <a class="el" href="my__route__lookup_8h.html#ab0481ad02246a7ccc6a7249eabc7fac8">Tablas</a> *tablas, uint32_t *IPToSearch, unsigned int *intf2)</td></tr>
<tr class="memdesc:ae78aeb8a794e89cc7fc9d40e7a7d2ec4"><td class="mdescLeft">&#160;</td><td class="mdescRight">REVISAR.  <a href="my__route__lookup_8h.html#ae78aeb8a794e89cc7fc9d40e7a7d2ec4">Más...</a><br /></td></tr>
<tr class="separator:ae78aeb8a794e89cc7fc9d40e7a7d2ec4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6422881caacaa117761404a9a906ebf9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="my__route__lookup_8h.html#a6422881caacaa117761404a9a906ebf9">ReadIPs</a> ()</td></tr>
<tr class="memdesc:a6422881caacaa117761404a9a906ebf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bucle encargado de la lectura de IPs del input.  <a href="my__route__lookup_8h.html#a6422881caacaa117761404a9a906ebf9">Más...</a><br /></td></tr>
<tr class="separator:a6422881caacaa117761404a9a906ebf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7a0d30cbdde5924d2b6572520cf4585"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="my__route__lookup_8h.html#ae7a0d30cbdde5924d2b6572520cf4585">SetRoutes</a> ()</td></tr>
<tr class="memdesc:ae7a0d30cbdde5924d2b6572520cf4585"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calcula los tiempos y imprime la informacion por pantalla.  <a href="my__route__lookup_8h.html#ae7a0d30cbdde5924d2b6572520cf4585">Más...</a><br /></td></tr>
<tr class="separator:ae7a0d30cbdde5924d2b6572520cf4585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4027bb0ee228612717529e4d7177424a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="my__route__lookup_8h.html#a4027bb0ee228612717529e4d7177424a">AddRoute</a> (<a class="el" href="my__route__lookup_8h.html#ab0481ad02246a7ccc6a7249eabc7fac8">Tablas</a> *tablas, uint32_t *IPToAdd, int *<a class="el" href="my__route__lookup_8c.html#a4efb9ef8062cf93ee03645c3e759c9ae">mascara</a>, int *intf3)</td></tr>
<tr class="memdesc:a4027bb0ee228612717529e4d7177424a"><td class="mdescLeft">&#160;</td><td class="mdescRight">REVISAR Añade la ruta a las tablas.  <a href="my__route__lookup_8h.html#a4027bb0ee228612717529e4d7177424a">Más...</a><br /></td></tr>
<tr class="separator:a4027bb0ee228612717529e4d7177424a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Documentación de los 'typedefs'</h2>
<a id="ab0481ad02246a7ccc6a7249eabc7fac8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0481ad02246a7ccc6a7249eabc7fac8">&#9670;&nbsp;</a></span>Tablas</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_kit_tablas.html">KitTablas</a> <a class="el" href="my__route__lookup_8h.html#ab0481ad02246a7ccc6a7249eabc7fac8">Tablas</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Estructura que almacena las 2 tablas principales, así como 2 indices. </p>

</div>
</div>
<h2 class="groupheader">Documentación de las funciones</h2>
<a id="af06d8c52ae4f34c8d204afa884cd80b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af06d8c52ae4f34c8d204afa884cd80b8">&#9670;&nbsp;</a></span>VarInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VarInit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inicializa las variables globales. </p>
<p>Reservamos memoria de nuestras variables PaquetesOK, Accesos, TiempoTotal. Inicializamos la variable de Error a 0 (Sin error)</p>

<p class="definition">Definición en la línea <a class="el" href="my__route__lookup_8c_source.html#l00109">109</a> del archivo <a class="el" href="my__route__lookup_8c_source.html">my_route_lookup.c</a>.</p>
<div class="dynheader">
Gráfico de llamadas a esta función:</div>
<div class="dyncontent">
<div class="center"><img src="my__route__lookup_8h_af06d8c52ae4f34c8d204afa884cd80b8_icgraph.png" border="0" usemap="#my__route__lookup_8h_af06d8c52ae4f34c8d204afa884cd80b8_icgraph" alt=""/></div>
<map name="my__route__lookup_8h_af06d8c52ae4f34c8d204afa884cd80b8_icgraph" id="my__route__lookup_8h_af06d8c52ae4f34c8d204afa884cd80b8_icgraph">
<area shape="rect" title="Inicializa las variables globales." alt="" coords="104,5,163,32"/>
<area shape="rect" href="my__route__lookup_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Loop principal de nuestro algoritmo (MAIN)." alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="ab0d915b11e7a3802d9a60edb7c218d62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0d915b11e7a3802d9a60edb7c218d62">&#9670;&nbsp;</a></span>TablasInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TablasInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="my__route__lookup_8h.html#ab0481ad02246a7ccc6a7249eabc7fac8">Tablas</a> *&#160;</td>
          <td class="paramname"><em>AllTables</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inicializa las tablas. </p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">tabla</td><td>Estructura que va a ser inicializada</td></tr>
  </table>
  </dd>
</dl>
<p>Para la tabla principal, reservamos la memoria necesaria para su maximo valor (2^24) La tabla auxiliar (no inicializada todavia) Las dos variables (indice y extensionesaux) se inicializan a valor 0 en primera instancia</p>

<p class="definition">Definición en la línea <a class="el" href="my__route__lookup_8c_source.html#l00126">126</a> del archivo <a class="el" href="my__route__lookup_8c_source.html">my_route_lookup.c</a>.</p>
<div class="dynheader">
Gráfico de llamadas a esta función:</div>
<div class="dyncontent">
<div class="center"><img src="my__route__lookup_8h_ab0d915b11e7a3802d9a60edb7c218d62_icgraph.png" border="0" usemap="#my__route__lookup_8h_ab0d915b11e7a3802d9a60edb7c218d62_icgraph" alt=""/></div>
<map name="my__route__lookup_8h_ab0d915b11e7a3802d9a60edb7c218d62_icgraph" id="my__route__lookup_8h_ab0d915b11e7a3802d9a60edb7c218d62_icgraph">
<area shape="rect" title="Inicializa las tablas." alt="" coords="104,5,181,32"/>
<area shape="rect" href="my__route__lookup_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Loop principal de nuestro algoritmo (MAIN)." alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="ad96bd166f3f6d7ce5de7a2a8f505c43f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad96bd166f3f6d7ce5de7a2a8f505c43f">&#9670;&nbsp;</a></span>DeleteAllTables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DeleteAllTables </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="my__route__lookup_8h.html#ab0481ad02246a7ccc6a7249eabc7fac8">Tablas</a> *&#160;</td>
          <td class="paramname"><em>AllTables</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Elimina y libera las tablas. </p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">tablas</td><td>Estructura que va a ser eliminada</td></tr>
  </table>
  </dd>
</dl>
<p>Liberamos la memoria de las dos tablas generadas (main y aux)</p>

<p class="definition">Definición en la línea <a class="el" href="my__route__lookup_8c_source.html#l00138">138</a> del archivo <a class="el" href="my__route__lookup_8c_source.html">my_route_lookup.c</a>.</p>
<div class="dynheader">
Gráfico de llamadas a esta función:</div>
<div class="dyncontent">
<div class="center"><img src="my__route__lookup_8h_ad96bd166f3f6d7ce5de7a2a8f505c43f_icgraph.png" border="0" usemap="#my__route__lookup_8h_ad96bd166f3f6d7ce5de7a2a8f505c43f_icgraph" alt=""/></div>
<map name="my__route__lookup_8h_ad96bd166f3f6d7ce5de7a2a8f505c43f_icgraph" id="my__route__lookup_8h_ad96bd166f3f6d7ce5de7a2a8f505c43f_icgraph">
<area shape="rect" title="Elimina y libera las tablas." alt="" coords="104,5,216,32"/>
<area shape="rect" href="my__route__lookup_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Loop principal de nuestro algoritmo (MAIN)." alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="ae78aeb8a794e89cc7fc9d40e7a7d2ec4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae78aeb8a794e89cc7fc9d40e7a7d2ec4">&#9670;&nbsp;</a></span>Search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Search </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>accesoextra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__route__lookup_8h.html#ab0481ad02246a7ccc6a7249eabc7fac8">Tablas</a> *&#160;</td>
          <td class="paramname"><em>AllTables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>IPToSearch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>intf2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>REVISAR. </p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">tablas</td><td>Estructura utilizada en la busqueda </td></tr>
    <tr><td class="paramname">IPToSearch</td><td>IP sobre la cual se obtiene interfaz </td></tr>
    <tr><td class="paramname">accesoextra</td><td>Nos indica a cuantas tablas accedemos en la busqueda (1 o 2) </td></tr>
    <tr><td class="paramname">intf2</td><td>Interfaz a calcular</td></tr>
  </table>
  </dd>
</dl>
<p>Este metodo realiza la busqueda de cierta IP previamente insertada en las Tablas y cuantidfica el numero de accesos</p>
<p>Recortamos el valor que se encuentre en la tabla principal para esa IP (Usamos un shift de 8 para recortar la IP de 32 a 24 ya que la tabla main solo acepta 24 bits)</p>
<p>Para saber si pertenece o no a la tabla auxiliar, utilizabamos el bit extra de la interfaz (nº 15) para ponerlo a 0 (si no tenia tabla auxiliar correspondiente) o a 1 (Si existe tabla auziliar para este)</p>
<p>No existe aux</p>
<p>De encontrarse directamente en la tabla principal, 1 acceso y nada mas que hacer</p>
<p>Sin embargo, en la auxiliar sera necesario volver a buscar, y los accesos serán 2</p>

<p class="definition">Definición en la línea <a class="el" href="my__route__lookup_8c_source.html#l00179">179</a> del archivo <a class="el" href="my__route__lookup_8c_source.html">my_route_lookup.c</a>.</p>
<div class="dynheader">
Gráfico de llamadas a esta función:</div>
<div class="dyncontent">
<div class="center"><img src="my__route__lookup_8h_ae78aeb8a794e89cc7fc9d40e7a7d2ec4_icgraph.png" border="0" usemap="#my__route__lookup_8h_ae78aeb8a794e89cc7fc9d40e7a7d2ec4_icgraph" alt=""/></div>
<map name="my__route__lookup_8h_ae78aeb8a794e89cc7fc9d40e7a7d2ec4_icgraph" id="my__route__lookup_8h_ae78aeb8a794e89cc7fc9d40e7a7d2ec4_icgraph">
<area shape="rect" title="REVISAR." alt="" coords="235,5,297,32"/>
<area shape="rect" href="my__route__lookup_8h.html#ae7a0d30cbdde5924d2b6572520cf4585" title="Calcula los tiempos y imprime la informacion por pantalla." alt="" coords="104,5,187,32"/>
<area shape="rect" href="my__route__lookup_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Loop principal de nuestro algoritmo (MAIN)." alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="a6422881caacaa117761404a9a906ebf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6422881caacaa117761404a9a906ebf9">&#9670;&nbsp;</a></span>ReadIPs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReadIPs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bucle encargado de la lectura de IPs del input. </p>
<p>Primero reservamos memoria para las variables IPAddress, mascara, InterfazSalida. El bucle while: </p><pre class="fragment">while(ErrorCheck == 0){  
  AddRoute(&amp;AllTables, IPAddress,mascara,InterfazSalida);
  ErrorCheck = readFIBLine(IPAddress,mascara,InterfazSalida);
}</pre><p> Añade una ruta a las tablas y le la siguiente lina, siempre que no haya error (error de lectura o EOF) Por ultimo liberamos la memoria de las variables temporales </p>

<p class="definition">Definición en la línea <a class="el" href="my__route__lookup_8c_source.html#l00157">157</a> del archivo <a class="el" href="my__route__lookup_8c_source.html">my_route_lookup.c</a>.</p>
<div class="dynheader">
Gráfico de llamadas para esta función:</div>
<div class="dyncontent">
<div class="center"><img src="my__route__lookup_8h_a6422881caacaa117761404a9a906ebf9_cgraph.png" border="0" usemap="#my__route__lookup_8h_a6422881caacaa117761404a9a906ebf9_cgraph" alt=""/></div>
<map name="my__route__lookup_8h_a6422881caacaa117761404a9a906ebf9_cgraph" id="my__route__lookup_8h_a6422881caacaa117761404a9a906ebf9_cgraph">
<area shape="rect" title="Bucle encargado de la lectura de IPs del input." alt="" coords="5,31,76,57"/>
<area shape="rect" href="my__route__lookup_8c.html#a6757537938363dc8ceda7a23e5f2d3e1" title="REVISAR Añade la ruta a las tablas." alt="" coords="130,5,209,32"/>
<area shape="rect" href="io_8c.html#ab8e9dcbf6b74715fc73bfed10e372832" title=" " alt="" coords="124,56,215,83"/>
</map>
</div>
<div class="dynheader">
Gráfico de llamadas a esta función:</div>
<div class="dyncontent">
<div class="center"><img src="my__route__lookup_8h_a6422881caacaa117761404a9a906ebf9_icgraph.png" border="0" usemap="#my__route__lookup_8h_a6422881caacaa117761404a9a906ebf9_icgraph" alt=""/></div>
<map name="my__route__lookup_8h_a6422881caacaa117761404a9a906ebf9_icgraph" id="my__route__lookup_8h_a6422881caacaa117761404a9a906ebf9_icgraph">
<area shape="rect" title="Bucle encargado de la lectura de IPs del input." alt="" coords="104,5,175,32"/>
<area shape="rect" href="my__route__lookup_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Loop principal de nuestro algoritmo (MAIN)." alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="ae7a0d30cbdde5924d2b6572520cf4585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7a0d30cbdde5924d2b6572520cf4585">&#9670;&nbsp;</a></span>SetRoutes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetRoutes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calcula los tiempos y imprime la informacion por pantalla. </p>
<p>Primero declaramos reservamos memoria para las variables temporales IPToSearch, intf, searching_time, accesoextra. (Usamos variables temporales ya que la información almacenada en estas sera printeada por esta misma función) --&gt; IMPORTANTE: Liberar</p>
<p>Importante tener en cuenta que ErrorCheck viene de ReadIPs con un valor =! 0 (final del archivo que se estava leyendo) y es importante restaurar a su valor por defecto (me ha dado serios problemas este detalle)</p>
<p>Clasico Bucle Mientaras no halla errores</p>
<p>Leer linea e actializar ErrorCheck</p>
<p>Segunda comprobación de ErrorCheck para evitar errores (Cuenta un paquete de mas asi como accesos etc)</p>
<p>Realizamos la primera medicion del Clock como se nos indica en <a class="el" href="io_8h.html">io.h</a></p>
<p>Ejectuamos el acceso a la IP de la cual se quiere medir el tiempo de busqueda </p><dl class="section see"><dt>Ver también</dt><dd><a class="el" href="my__route__lookup_8c.html#a25ec64d7de94ddeffc4e51c90fb918a2" title="REVISAR.">Search()</a></dd></dl>
<p>Realizamos la segunda medicion del Clock como se nos indica en <a class="el" href="io_8h.html">io.h</a> <br  />
</p>
<p>Imprimimos los datos obtenidos por pantalla usando la estructura IP;INT;Tiempo usando el metodo dado</p>
<p>Aumentamos las variables en funcion de lo obtenido en Search y almacenamos en las variables globales, que luego sera printadas </p><dl class="section see"><dt>Ver también</dt><dd><a class="el" href="io_8h.html#a3ed842258dba090f811c13f5d073e5f8">printSummary</a>(*PaquetesOK, (*Accesos / *PaquetesOK), (*TiempoTotal / *PaquetesOK)</dd></dl>
<p>Liberamos la memoria de las variable (SOLO LAS TEMPORALES)</p>

<p class="definition">Definición en la línea <a class="el" href="my__route__lookup_8c_source.html#l00199">199</a> del archivo <a class="el" href="my__route__lookup_8c_source.html">my_route_lookup.c</a>.</p>
<div class="dynheader">
Gráfico de llamadas para esta función:</div>
<div class="dyncontent">
<div class="center"><img src="my__route__lookup_8h_ae7a0d30cbdde5924d2b6572520cf4585_cgraph.png" border="0" usemap="#my__route__lookup_8h_ae7a0d30cbdde5924d2b6572520cf4585_cgraph" alt=""/></div>
<map name="my__route__lookup_8h_ae7a0d30cbdde5924d2b6572520cf4585_cgraph" id="my__route__lookup_8h_ae7a0d30cbdde5924d2b6572520cf4585_cgraph">
<area shape="rect" title="Calcula los tiempos y imprime la informacion por pantalla." alt="" coords="5,56,88,83"/>
<area shape="rect" href="io_8c.html#a7d19fa5b643e9e4793920e8f664f6639" title=" " alt="" coords="161,5,272,32"/>
<area shape="rect" href="io_8c.html#aca77a9e23d49236a068e7c4c9a7e1b51" title=" " alt="" coords="136,56,297,83"/>
<area shape="rect" href="my__route__lookup_8c.html#a25ec64d7de94ddeffc4e51c90fb918a2" title="REVISAR." alt="" coords="185,107,248,133"/>
<area shape="rect" href="io_8c.html#a4eb9e343d677a78e2fb32b5955d236e4" title=" " alt="" coords="345,5,385,32"/>
</map>
</div>
<div class="dynheader">
Gráfico de llamadas a esta función:</div>
<div class="dyncontent">
<div class="center"><img src="my__route__lookup_8h_ae7a0d30cbdde5924d2b6572520cf4585_icgraph.png" border="0" usemap="#my__route__lookup_8h_ae7a0d30cbdde5924d2b6572520cf4585_icgraph" alt=""/></div>
<map name="my__route__lookup_8h_ae7a0d30cbdde5924d2b6572520cf4585_icgraph" id="my__route__lookup_8h_ae7a0d30cbdde5924d2b6572520cf4585_icgraph">
<area shape="rect" title="Calcula los tiempos y imprime la informacion por pantalla." alt="" coords="104,5,187,32"/>
<area shape="rect" href="my__route__lookup_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Loop principal de nuestro algoritmo (MAIN)." alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="a4027bb0ee228612717529e4d7177424a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4027bb0ee228612717529e4d7177424a">&#9670;&nbsp;</a></span>AddRoute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AddRoute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="my__route__lookup_8h.html#ab0481ad02246a7ccc6a7249eabc7fac8">Tablas</a> *&#160;</td>
          <td class="paramname"><em>AllTables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>IPToAdd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>mascara</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>intf3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>REVISAR Añade la ruta a las tablas. </p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">tablas</td><td>Estructura en la cual se realiza la inserción </td></tr>
    <tr><td class="paramname">IPToAdd</td><td>IP a insertar </td></tr>
    <tr><td class="paramname">mascara</td><td>de la ip </td></tr>
    <tr><td class="paramname">intf3</td><td>Interfaz de salida que se genera</td></tr>
  </table>
  </dd>
</dl>
<p>Esta función, como su nombre indica, se encarga de añadir una determinada IP a nuestras tablas. Esto propone 2 casos: Al igual que en la función <a class="el" href="my__route__lookup_8c.html#a25ec64d7de94ddeffc4e51c90fb918a2" title="REVISAR.">Search()</a>, debemos saber si hemos de insertar en la 1ª o 2ª Tabla (main o aux) Sin embargo, a diferencia que en search obtenemos la mascara como argumento, por lo tanto, si esta en menor o igual que 24, sera la tabla 1</p>
<p>En la tabla main:</p>
<p>Calculamos cuantas IPs hemos de modificar su interfaz para la nueva mascara SIEMPRE sera total de IPs menos la mascara <br  />
</p>
<p>Un for sencillo que recorre la tabla de 0 hasta el valor de IPsAModificar</p>
<p>Realizamos un shift sobre la IP para obtener solo los bits que importan (24 bits ya que como hemos declarado en el if, la mascara es menor que 24, por lo tanto nos da igual que venga despues del bit 24) y asignamos la interfaz</p>
<p>De la misma manera que en search(), comprobamos si existe una tabla aux</p>
<p>Calculamos cuantas IPs hemos de modificar su interfaz para la nueva mascara SIEMPRE sera total de IPs (ahora es 2^32 ya que estamos en la tabla auxiliar, que es mas grande que la main pero no estatica)menos la mascara <br  />
</p>
<p>No existe aux</p>
<p>En el caso de no existir, hemos de crearla! No olvidar usar MEMORIA DINAMICA</p>
<p>El tamaño del realloc lo calculamos como el nuevo bloque (256)+ los bloques ya existentes (256*existensiones)</p>
<p>Con un for de 0 a 255 (256 posiciones) recorremos la nueva extension de la tabla rellenándola</p>
<p>Rellenamos los espacios creados con la interfaz correspondiente</p>
<p>Se puede simplificar?</p>
<p>Es importante indicar en la tabla principal que ya hemos creado una extension de la tabla auxiliar. Al principio no hacia esto, y se generaban extensiones de la tabla por cada IP resultando en un absoluto gasto de memoria</p>
<p>Para realizar este cambio hemos utilizado operadores bitwise. So we use bit 15 as a flag </p><dl class="section see"><dt>Ver también</dt><dd>Check <a href="https://stackoverflow.com/questions/37948920/changing-the-most-significant-bit-in-a-int16">https://stackoverflow.com/questions/37948920/changing-the-most-significant-bit-in-a-int16</a> for a detailed example <br  />
</dd></dl>
<p>al igual que lo indicamos en la tabla principal, tambien aumentamos en uno el numero de extensiones</p>
<p>Si se aumenta el valor antes de cambiarlo en la tabla, resulta en error</p>
<p>Rellenamos los espacios creado con la interfaz</p>
<p>Simplificar ?</p>

<p class="definition">Definición en la línea <a class="el" href="my__route__lookup_8c_source.html#l00237">237</a> del archivo <a class="el" href="my__route__lookup_8c_source.html">my_route_lookup.c</a>.</p>
<div class="dynheader">
Gráfico de llamadas a esta función:</div>
<div class="dyncontent">
<div class="center"><img src="my__route__lookup_8h_a4027bb0ee228612717529e4d7177424a_icgraph.png" border="0" usemap="#my__route__lookup_8h_a4027bb0ee228612717529e4d7177424a_icgraph" alt=""/></div>
<map name="my__route__lookup_8h_a4027bb0ee228612717529e4d7177424a_icgraph" id="my__route__lookup_8h_a4027bb0ee228612717529e4d7177424a_icgraph">
<area shape="rect" title="REVISAR Añade la ruta a las tablas." alt="" coords="223,5,301,32"/>
<area shape="rect" href="my__route__lookup_8h.html#a6422881caacaa117761404a9a906ebf9" title="Bucle encargado de la lectura de IPs del input." alt="" coords="104,5,175,32"/>
<area shape="rect" href="my__route__lookup_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="Loop principal de nuestro algoritmo (MAIN)." alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_568230800e6e26f655c3e02e84ac0b04.html">student_source</a></li><li class="navelem"><a class="el" href="my__route__lookup_8h.html">my_route_lookup.h</a></li>
    <li class="footer">Generado por
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
